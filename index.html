<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta charset="utf-8" />
    <title>SharePoint Org Chart</title>
    <!-- Third Party Style Sheets -->
    <link rel="stylesheet" type="text/css" href="lib/foundation/css/foundation.css" />
    <link rel="stylesheet" type="text/css" href="lib/orgchart/jquery.orgchart.css" />
    <!-- Our Style Sheets -->
    <link rel="stylesheet" href="css/style.css" />
    <!-- Third Party JavaScript -->
    <script src="lib/jquery.js"></script>
    <script type="text/javascript" src="lib/underscore.js"></script>
    <script type="text/javascript" src="lib/backbone.js"></script>
    <script type="text/javascript" src="lib/foundation/js/foundation.min.js"></script>
    <script type="text/javascript" src="lib/foundation/js/vendor/modernizr.js"></script>
    <script type="text/javascript" src="lib/orgchart/jquery.orgchart.js"></script>
</head>

<body>
    <div class="nav contain-to-grid sticky">
        <nav class="top-bar" data-topbar role="navigation">
            <ul class="title-area">
                <li class="name">
                    <h1><a href="#"></a></h1>
                </li>
                <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
                <li class="toggle-topbar menu-icon"><a><span>Menu</span></a>
                </li>
            </ul>
            <section class="top-bar-section">
                <!-- Right Nav Section -->
                <ul class="right">
                    <li class="has-dropdown">
                        <a>Departments</a>
                        <ul class="dropdown departments">
                            <li><a href="#">All</a></li>
                        </ul>
                    </li>
                </ul>
            </section>
        </nav>
    </div>
    <div id="main"></div>
    <!-- TEMPLATES -->
    <script type="text/template" id="org-chart-template">
        <div id="org-chart"></div>
        <div class="reveal-modal" data-reveal aria-labelledby="modalTitle" aria-hidden="true" role="dialog">
            <div class="content"></div>
            <a class="close-reveal-modal" aria-label="Close">&#215;</a>
        </div>
    </script>
    <script type="text/template" id="item-template">
        <div class='node' node-id="<%=id%>">
            <h5><%=name%></h5>
            <h5 class="subheader"><a href="#department/<%=department%>"><%=department%></a></h5>
            <h6 class="subheader"><%=title%></h6>
            <% if(app.config.editing){%>
                <div class="context vcard">
                    <a class="add">Add</a>
                    <a class="delete <%=(children.length > 0 ? 'disabled' : '')%>">Delete</a>
                </div>
                <%}%>
        </div>
    </script>
    <script type="text/template" id="details-item-template">
        <form>
            <div class="row">
                <div class="large-12 columns">
                    <label>Name
                        <input type="text" class="name" value="<%=name%>" <%=( app.config.editing ? '': 'disabled' ) %>/>
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="large-12 columns">
                    <label>Email
                        <input type="email" class="email" value="<%=email%>" <%=( app.config.editing ? '': 'disabled' ) %>/>
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="large-12 columns">
                    <label>Phone
                        <input type="tel" class="phone" value="<%=phone%>" <%=( app.config.editing ? '': 'disabled' ) %>/>
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="large-12 columns">
                    <label>Department
                        <input type="text" class="department" value="<%=department%>" <%=( app.config.editing ? '' : 'disabled' ) %>/>
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="large-12 columns">
                    <label>Title
                        <input type="text" class="title" value="<%=title%>" <%=( app.config.editing ? '': 'disabled' ) %>/>
                    </label>
                </div>
            </div>
            <% if(app.config.editing){%>
                <a class="button save">Save</a>
                <a class="button close-reveal-modal">Cancel</a>
                <%}%>
        </form>
    </script>
    <script type="text/template" id="fetchingDataTemplate">
        <div class="text-center library-message">
            <p>Fetching data<span class="ellipsis"></span></p>
        </div>
    </script>
    <script type="text/template" id="errorTemplate">
        <div class="text-center library-message">
            <h1>Error</h1>
            <h1 class="subheader">Sorry, but the requested page does not exist :(</h1>
        </div>
    </script>
    <script type="text/javascript" id="noItemsTemplate">
    </script>
    <!-- Models -->
    <script src="js/models/item.js"></script>
    <script src="js/models/library.js"></script>
    <!-- Views -->
    <script src="js/views/item.js"></script>
    <script src="js/views/details.js"></script>
    <script src="js/views/library.js"></script>
    <script src="js/views/fetchingData.js"></script>
    <script src="js/views/error.js"></script>
    <script src="js/views/app.js"></script>
    <!-- Application -->
    <script src="js/data.js"></script>
    <script src="js/data.test.js"></script>
    <script src="js/utility.js"></script>
    <script src="js/config.js"></script>
    <script src="js/app.js"></script>
    <!-- Router -->
    <script src="js/routes/routes.js"></script>
    <script>
    $(document).foundation({});
    $('body').on('click', function(e) {
        $('.context').hide();
    }).on('contextmenu', function(e) {
        var $node = $(e.target).hasClass('node') ? $(e.target) : $(e.target).parents('.node');
        $('.context').each(function(){
            if($(this).parents('.node')[0] != $node[0]){
                $(this).hide();
            }
        });
    });
    </script>
</body>

</html>
